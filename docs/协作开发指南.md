# 协作开发指南

> 说明如何让其他项目参与主题组件的开发和贡献

## 📋 目录

- [开发模式确认](#开发模式确认)
- [协作开发场景](#协作开发场景)
- [协作开发方式](#协作开发方式)
- [推荐流程](#推荐流程)

---

## ✅ 开发模式确认

### 当前项目（km-artizen-ui）

**开发模式**：本地开发模式（workspace）

- ✅ 主题组件在 `packages/theme-system/` 中开发
- ✅ 使用 `workspace:*` 协议，直接使用本地开发版本
- ✅ 开发完成后推送到 GitHub
- ✅ 其他项目通过 GitHub 下载使用

**流程**：

```
开发 → 构建 → 测试（本地） → 推送到 GitHub → 其他项目更新
```

---

## 🎯 协作开发场景

### 场景一：其他项目需要修改主题组件

**情况**：

- 其他项目（如 km-flow-ui）在使用主题组件时发现需要修改
- 或者需要添加新功能

**问题**：

- 其他项目没有 `packages/theme-system/` 目录
- 无法直接修改主题组件代码
- 如何参与开发？

### 场景二：多人协作开发

**情况**：

- 多个开发者需要同时开发主题组件
- 需要代码审查和协作

**问题**：

- 如何管理代码变更？
- 如何确保代码质量？

---

## 🔄 协作开发方式

### 方式一：Fork + Pull Request（推荐）

**流程**：

1. **Fork 仓库**
   - 其他开发者 Fork `https://github.com/hjw472015868/theme` 到自己的 GitHub
   - 获得自己的仓库地址：`https://github.com/other-user/theme`

2. **克隆到本地**

   ```bash
   git clone https://github.com/other-user/theme.git
   cd theme
   ```

3. **创建开发分支**

   ```bash
   git checkout -b feature/new-theme
   ```

4. **开发修改**
   - 修改代码
   - 添加新主题
   - 修复问题

5. **构建和测试**

   ```bash
   pnpm install
   pnpm build
   # 在自己的项目中测试
   ```

6. **提交和推送**

   ```bash
   git add .
   git commit -m "feat: 添加新功能"
   git push origin feature/new-theme
   ```

7. **创建 Pull Request**
   - 在 GitHub 上创建 PR
   - 请求合并到主仓库
   - 代码审查

8. **合并后发布**
   - 主仓库维护者合并 PR
   - 创建新版本标签
   - 所有项目更新

**优势**：

- ✅ 代码审查机制
- ✅ 版本控制清晰
- ✅ 多人协作友好
- ✅ 代码质量有保障

**适用场景**：

- 多人协作开发
- 需要代码审查
- 正式的功能开发

---

### 方式二：直接提交到主仓库（需要权限）

**流程**：

1. **获得主仓库权限**
   - 主仓库维护者添加协作者
   - 或使用组织账号

2. **克隆主仓库**

   ```bash
   git clone https://github.com/hjw472015868/theme.git
   cd theme
   ```

3. **创建开发分支**

   ```bash
   git checkout -b feature/new-theme
   ```

4. **开发修改**
   - 修改代码
   - 构建测试

5. **提交和推送**

   ```bash
   git add .
   git commit -m "feat: 添加新功能"
   git push origin feature/new-theme
   ```

6. **创建 Pull Request**
   - 在 GitHub 上创建 PR
   - 代码审查后合并

**优势**：

- ✅ 流程简单
- ✅ 适合小团队

**适用场景**：

- 小团队内部开发
- 有主仓库权限的开发者

---

### 方式三：本地修改 + 补丁（临时方案）

**流程**：

1. **在其他项目中修改**
   - 克隆主题包到本地
   - 在项目中链接本地包
   - 修改代码

2. **生成补丁**

   ```bash
   # 在主题包目录中
   git diff > my-changes.patch
   ```

3. **提交补丁**
   - 通过 Issue 提交补丁文件
   - 或发送给主仓库维护者

4. **主仓库应用补丁**
   - 主仓库维护者审查
   - 应用补丁
   - 发布新版本

**优势**：

- ✅ 适合临时修改
- ✅ 不需要 Fork

**适用场景**：

- 临时修改
- 紧急修复
- 不熟悉 Git 流程的开发者

---

### 方式四：Issue + 描述（最简单）

**流程**：

1. **在其他项目中发现问题或需求**
   - 记录问题和需求

2. **创建 GitHub Issue**
   - 在 `https://github.com/hjw472015868/theme/issues` 创建 Issue
   - 详细描述问题或需求
   - 提供复现步骤或示例

3. **主仓库维护者处理**
   - 主仓库维护者查看 Issue
   - 评估需求
   - 开发实现

4. **发布新版本**
   - 实现后发布新版本
   - 所有项目更新

**优势**：

- ✅ 最简单
- ✅ 不需要开发能力
- ✅ 适合需求收集

**适用场景**：

- 报告问题
- 提出需求
- 不参与开发的用户

---

## 🎯 推荐流程

### 对于主仓库维护者（你）

**开发流程**：

1. 在 `packages/theme-system/` 中开发
2. 使用 `workspace:*` 协议测试
3. 推送到 GitHub
4. 创建版本标签
5. 其他项目更新

**协作流程**：

1. 审查 Pull Request
2. 合并代码
3. 发布新版本
4. 通知其他项目更新

### 对于其他开发者

**参与开发流程**：

1. Fork 仓库（或获得权限）
2. 克隆到本地
3. 创建开发分支
4. 开发修改
5. 构建测试
6. 提交代码
7. 创建 Pull Request
8. 等待审查和合并

**使用流程**：

1. 通过 GitHub 安装主题包
2. 使用过程中发现问题或需求
3. 创建 Issue 或 Pull Request
4. 等待更新

---

## 📝 总结

### 开发模式

| 角色             | 开发位置                 | 使用方式      | 发布方式          |
| ---------------- | ------------------------ | ------------- | ----------------- |
| **主仓库维护者** | `packages/theme-system/` | `workspace:*` | 直接推送到 GitHub |
| **其他开发者**   | Fork 的仓库              | 本地开发      | 通过 Pull Request |
| **其他项目**     | -                        | GitHub 安装   | 更新依赖          |

### 协作方式选择

- **正式开发**：Fork + Pull Request（推荐）
- **小团队**：直接提交到主仓库
- **临时修改**：本地修改 + 补丁
- **需求反馈**：Issue + 描述

### 关键点

1. **主仓库**：`https://github.com/hjw472015868/theme`
2. **开发位置**：`packages/theme-system/`（当前项目）
3. **使用方式**：当前项目用 `workspace:*`，其他项目用 GitHub
4. **协作方式**：Fork + Pull Request 或直接提交（需权限）

---

**最后更新**: 2025-01-14  
**版本**: v1.0.0
